<!DOCTYPE html>
<html>
  <head>
      <title>Chart-Maker</title>
      <link rel="shortcut icon" type="image/png" href="./favicon.png"/>

      <!-- CSS Resources -->

      <!-- End CSS Resources -->


      <!-- Javascript Resources -->
      <script src="./plotly.js"></script>
      <script src="./jQuery.js"></script>
      <!-- End Javascript Resources -->

  </head>

  <script>
    function create() {
      var ltd = $("#URLdata").val();
      console.log(ltd);


      Plotly.d3.csv("./drinks.csv", function(err, rows) {
            function unpack(rows, key) {
                return rows.map(function(row) {
                  return row[key];
                });
            }

          var data = [{
              type: 'choropleth',
              locationmode: "country names",
              locations: unpack(rows, 'country'),
              z: unpack(rows, 'beer_servings'),
              text: unpack(rows, 'spirit_servings'),
              colorscale: [
                  [0,'rgb(5, 10, 172)'],[0.35,'rgb(40, 60, 190)'],
                  [0.5,'rgb(70, 100, 245)'], [0.6,'rgb(90, 120, 245)'],
                  [0.7,'rgb(106, 137, 247)'],[1,'rgb(220, 220, 220)']],
              autocolorscale: false,
              reversescale: true,
              marker: {
                  line: {
                      color: 'rgb(180,180,180)',
                      width: 0.5
                  }
              },
              tick0: 0,
              zmin: 0,
              dtick: 1000,
              colorbar: {
                autotic: false,
                ticksuffix: ' Liters',
                title: 'Beer Servings by Country'
              }
              }];

          var layout = {
            title: 'Alcohol Servings by Country',
            showlegend: true,
            geo: {
                projection: {
                    type: 'robinson'
                }
            }
          };

          $("#Selection").remove();
          $("nav").hide();

          Plotly.plot(chart, data, layout, {displayModeBar: false}, {showLink: false});
      });
    }

    function popup() {
      $(".modal").show();
    }

    function cancel() {
      $(".modal").hide();
    }

    function reset() {
      console.log("CLEARED");
      window.location.reload();
    }
  </script>



  <body ng-app="Charter" style="overflow: hidden"> <!-- style="overflow: hidden" -->
    <div ng-controller="cont">

      <!-- Navbar Begins -->
      <nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="" onclick="window.location.reload()">Data.World Chart-Maker</a>
          </div>

          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
              <li><a href="https://kartik-nagpal.github.io/#">Portfolio<span class="sr-only">(current)</span></a></li>
              <li><a href="https://kartik-nagpal.github.io/#Bubbles">Bubbles</a></li>
              <li><a href="https://kartik-nagpal.github.io/#PlanetSim">PlanetSim</a></li>
              <li><a href="https://kartik-nagpal.github.io/#ANN">Javascript ANN</a></li>
            </ul>

          </div>
        </div>
      </nav>
      <!-- Navbar End -->

      <div id="Selection" class="container">
        <div class="row">
          <div class="col-md-1"></div>
          <div class="col-md-10">

            <div class="well">
              <form class="form-horizontal">
                <fieldset>
                  <legend>Create a Chart</legend>
                  <div class="form-group">
                      <label class="control-label col-lg-2" for="DataURL">Insert Data URL</label>
                    <div class="col-lg-10">
                      <input class="form-control" id="URLdata" type="text" value="https://query.data.world/s/9igaz4qvvz4e6l8ipn27ibwbt"><!-- data.world/[url] -->
                    </div>
                  </div>


                  <div class="form-group">
                    <div class="col-lg-2"></div>
                    <div class="col-lg-5">
                      <label for="exampleInputFile">File Input</label>
                      <input type="file" class="form-control-file" id="exampleInputFile" aria-describedby="fileHelp" disabled>
                      <small id="fileHelp" class="form-text text-muted">Have it in file form? No Problem! Just Upload your Data</small>
                    </div>

                    <div class="col-lg-5">
                      <div class="form-group">
                        <label for="select" class="col-lg-4 control-label">Data Type</label>
                        <div class="col-lg-8">
                          <select class="form-control" id="select">
                            <option>CSV File</option>
                            <option>Excel File</option>
                            <option disabled>More Coming Soon</option>
                          </select>
                        </div>
                      </div>
                    </div>

                  </div>


                  <!--<div class="form-group">
                    <label for="select" class="col-lg-2 control-label">Data Type</label>
                    <div class="col-lg-10">
                      <select class="form-control" id="select">
                        <option>CSV File</option>
                        <option>Excel File</option>
                        <option disabled>More Coming Soon</option>
                      </select>
                    </div>
                  </div>-->


                  <div class="form-group">
                    <label for="select" class="col-lg-2 control-label">Chart Type</label>
                    <div class="col-lg-10">
                      <select class="form-control" id="select">
                        <option>Line Plot</option>
                        <option>Bubble Chart</option>
                        <option>Scatter Plot</option>
                        <option>Heatmap</option>
                        <option>Bar Chart</option>
                        <option>Area Plots</option>
                        <option>Box Plots</option>
                        <option>2D Histogram</option>
                        <option>Histograms</option>
                        <option>Bubble Map</option>
                        <option>Cloropleth Map</option>
                        <option>Scatter Map</option>
                        <option>3D Surface Plots</option>
                        <option>3D Line Plots</option>
                        <option>3D Scatter Plots</option>
                      </select>
                    </div>
                  </div>

                  <div class="panel panel-info container-fluid">
                    <div class="panel-heading row">
                      <h3 class="panel-title">Chart Info</h3>
                    </div>
                    <div class="panel-body">
                      Content
                      <div class="row">
                        <div class="form-group">
                          <label for="ChartTitle" class="col-lg-2 control-label">Chart Title</label>
                          <div class="col-lg-10">
                            <input type="text" class="form-control" id="ChartTitle" placeholder="Alcohol Servings by Country">
                          </div>
                        </div>

                      </div>
                      <div class="row">
                        <div class="form-group">
                          <label for="LegendTitle" class="col-lg-2 control-label">Legend Title</label>
                          <div class="col-lg-10">
                            <input type="text" class="form-control" id="LegendTitle" placeholder="Beer Servings by Country">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="form-group">
                          <label for="Units" class="col-lg-2 control-label">Legend Units</label>
                          <div class="col-lg-10">
                            <input type="text" class="form-control" id="Units" placeholder="Liters">
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>





                  <div class="form-group">
                    <div class="col-lg-10 col-lg-offset-2">
                      <button type="reset" class="btn btn-default" onclick="popup()">Cancel</button>
                      <button type="button" class="btn btn-primary" onclick="create()">Submit</button>
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>





            <div class="modal">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="cancel()">&times;</button>
                    <h4 class="modal-title">User Confirmation</h4>
                  </div>
                  <div class="modal-body">
                    <p>ARE YOU SURE YOU WOULD LIKE TO CLEAR ALL FIELDS?</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-danger" onclick="reset()" id="Yes">Yes, Delete</button>
                    <button type="button" class="btn btn-success" onclick="cancel()" id="No" autofocus>No, Save</button>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <div class="col-md-1"></div>
        </div>

      </div>


      <!--<div class="loading container-fluid" style="display: none; min-height: 100%; min-height: 100vh; ">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2" style="display: table-cell; vertical-align: middle; align-items: center;">
            <h1>Getting Things Ready...</h1>
            <div class="progress progress-striped active">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>-->


      <div class="well" style="min-height: calc(100vh - 80px);">
        <!-- Plotly chart will be drawn inside this the #chart, becuase you pass that variable to it, right near the end -->
        <div id="chart" style="min-height: calc(100vh - 80px);"></div>
      </div>

    </div>
  </body>
</html>
